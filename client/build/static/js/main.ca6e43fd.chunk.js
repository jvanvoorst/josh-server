(this["webpackJsonpjosh-ai-store"]=this["webpackJsonpjosh-ai-store"]||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),i=n(62),o=n.n(i),s=(n(70),n(6)),u=n.n(s),l=n(14),d=n(27),j=n(2),b=n(15),h=n.n(b),O=n(63),x=n.n(O);n(119);function m(e){var t=e.button;return Object(c.jsxs)("div",{className:"headerContainer",children:[Object(c.jsx)("div",{className:"headerText",children:"Josh.AI Grocers"}),Object(c.jsx)("div",{className:"link",children:t})]})}n(120);function p(e){var t=e.onClick,n=e.children,r=e.disabled;return Object(c.jsx)("button",{className:"button",onClick:t,disabled:r,children:n})}var f=n(4),v=n(19),C={modalVisible:!1,modalContent:null,foodItems:[],cart:[]},y=Object(r.createContext)(C),k=y.Provider,g=function(e){var t=e.children,n=Object(r.useReducer)((function(e,t){switch(t.type){case"show_modal":return Object(f.a)(Object(f.a)({},e),{},{modalContent:t.payload,modalVisible:!0});case"hide_modal":return Object(f.a)(Object(f.a)({},e),{},{modalContent:null,modalVisible:!1});case"set_food_items":return Object(f.a)(Object(f.a)({},e),{},{foodItems:t.payload});case"set_cart":return Object(f.a)(Object(f.a)({},e),{},{cart:t.payload});default:throw new Error}}),C),a=Object(v.a)(n,2),i=a[0],o=a[1];return Object(c.jsx)(k,{value:{state:i,dispatch:o},children:t})};n(60),n(121);function N(e){var t=e.children,n=e.onClick;return Object(c.jsx)("div",{className:"textButton",onClick:n,children:t})}n(122);function w(e){var t=e.items,n=e.action,r=e.onQuantityChange;return Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{className:"table",children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Item"}),Object(c.jsx)("th",{children:"quantity"}),Object(c.jsx)("th",{children:"unit price"}),Object(c.jsx)("th",{children:"line total"})]}),t.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.item}),r?Object(c.jsx)("td",{children:Object(c.jsx)("input",{value:e.quantity,onChange:function(e){return r(e)},type:"number",className:"tableInput"})}):Object(c.jsx)("td",{children:e.quantity}),Object(c.jsx)("td",{children:e.price.toFixed(2)}),Object(c.jsx)("td",{children:(e.price*e.quantity).toFixed(2)}),n?Object(c.jsx)("td",{children:Object(c.jsx)(N,{onClick:function(){return n.onClick(e)},children:n.text})}):null]},e.item)}))]})})}var _="http://localhost:3001/api/";function I(e){var t=e.item,n=Object(r.useContext)(y).dispatch,a=Object(r.useState)(t),i=Object(v.a)(a,2),o=i[0],s=i[1],d=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat(_,"food-item"),o);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("An error occured posting food item",e.t0);case 8:n({type:"hide_modal"});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"lineItemModalContainer",children:[Object(c.jsx)("h1",{children:"Line Item"}),Object(c.jsx)(w,{items:[o],onQuantityChange:function(e){return s(Object(f.a)(Object(f.a)({},o),{},{quantity:Number(e.target.value)}))}}),Object(c.jsxs)("div",{className:"buttonContainer",children:[Object(c.jsx)(p,{onClick:function(){return d()},disabled:!o.quantity,children:"Save"}),Object(c.jsx)(p,{onClick:function(){return n({type:"hide_modal"})},children:"Cancel"})]})]})}n(123);function F(e){var t=e.items;return Object(c.jsx)("div",{className:"tableContainer",children:t.map((function(e){return Object(c.jsx)(q,{item:e},e.id)}))})}function q(e){var t=e.item,n=Object(r.useContext)(y).dispatch;return Object(c.jsxs)("div",{className:"itemContainer",children:[Object(c.jsx)("img",{src:t.image,alt:t.item}),Object(c.jsx)("p",{children:t.description}),Object(c.jsxs)("div",{children:[Object(c.jsx)(p,{onClick:function(){var e={item:t.item,quantity:1,price:t.price};n({type:"show_modal",payload:Object(c.jsx)(I,{item:e})})},children:"Add To Cart"}),Object(c.jsx)("span",{children:"$ ".concat(t.price.toFixed(2))})]})]})}function A(){var e=Object(j.f)(),t=Object(r.useContext)(y).state;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m,{button:Object(c.jsx)(p,{onClick:function(){return e.push("/cart")},children:"Cart (".concat(t.cart.length,")")})}),Object(c.jsx)(F,{items:t.foodItems,onItemClick:function(e){return console.log("itemClick",e)}})]})}function S(e){var t=e.item,n=Object(r.useContext)(y).dispatch,a=Object(r.useState)(t),i=Object(v.a)(a,2),o=i[0],s=i[1],d=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.put("".concat(_,"food-item"),o);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("An error occured updating food item",e.t0);case 8:n({type:"hide_modal"});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("".concat(_,"food-item"),{data:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("An error occured deleting food item",e.t0);case 8:n({type:"hide_modal"});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"lineItemModalContainer",children:[Object(c.jsx)("h1",{children:"Line Item"}),Object(c.jsx)(w,{items:[o],action:{text:"remove",onClick:function(e){return j(e)}},onQuantityChange:function(e){return s(Object(f.a)(Object(f.a)({},o),{},{quantity:Number(e.target.value)}))}}),Object(c.jsxs)("div",{className:"buttonContainer",children:[Object(c.jsx)(p,{onClick:function(){return d()},disabled:!o.quantity,children:"Save"}),Object(c.jsx)(p,{onClick:function(){return n({type:"hide_modal"})},children:"Cancel"})]})]})}n(128);function T(e){var t=e.items,n=Object(r.useContext)(y).dispatch;return Object(c.jsx)("div",{className:"cartContainer",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Cart"}),t.length?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{items:t,action:{onClick:function(e){n({type:"show_modal",payload:Object(c.jsx)(S,{item:e})})},text:"edit"}}),Object(c.jsx)("h4",{children:"Total"}),Object(c.jsx)("p",{children:t.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2)})]}):Object(c.jsx)("h1",{className:"emptyText",children:"Empty"})]})})}function E(){var e=Object(j.f)(),t=Object(r.useContext)(y).state;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m,{button:Object(c.jsx)(p,{onClick:function(){return e.push("/")},children:"Home"})}),Object(c.jsx)(T,{items:t.cart})]})}n(129);function B(e){var t=e.visible,n=e.children;return t?Object(c.jsx)("div",{className:"modalBackground",children:Object(c.jsx)("div",{className:"modal",children:n})}):null}var L=function(){var e=Object(r.useContext)(y),t=e.state,n=e.dispatch;return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(_,"food-items"));case 3:t=e.sent,n({type:"set_food_items",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("An error occured fetching data",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(_,"cart"));case 3:t=e.sent,n({type:"set_cart",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("An error occured fetching data",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[n]),Object(r.useEffect)((function(){x()("http://localhost:3001").on("cart_update",(function(e){console.log("recieved cart update",e),n({type:"set_cart",payload:e})}))})),Object(c.jsx)(d.a,{children:Object(c.jsxs)("div",{children:[Object(c.jsx)(B,{visible:t.modalVisible,children:t.modalContent}),Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/cart",children:Object(c.jsx)(E,{})}),Object(c.jsx)(j.a,{path:"/",children:Object(c.jsx)(A,{})})]})]})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(g,{children:Object(c.jsx)(L,{})})}),document.getElementById("root")),V()},60:function(e,t,n){},70:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.ca6e43fd.chunk.js.map